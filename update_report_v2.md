# รายงานการปรับปรุงระบบ Amulet-AI (อัพเดท)

## การอัพเดทชื่อหมวดหมู่พระเครื่อง

ได้ทำการปรับปรุงระบบให้ใช้ชื่อหมวดหมู่ภาษาอังกฤษทั้งหมด เพื่อให้รองรับการใช้งานระดับสากลและลดปัญหาเรื่องการเข้ารหัสอักขระพิเศษ โดยมีรายละเอียดดังนี้:

### 1. การอัพเดทใน config.json

ปรับปรุงชื่อหมวดหมู่ใน `categories` ให้เป็นภาษาอังกฤษทั้งหมด:

```json
"categories": [
  "somdej_fatherguay",
  "somdej_portrait_back",
  "somdej_prok_bodhi",
  "somdej_waek_man",
  "wat_nong_e_duk",
  "wat_nong_e_duk_misc"
]
```

### 2. การอัพเดท API และ Services

- ปรับปรุงรายชื่อหมวดหมู่ใน `backend/api/api.py` ให้เป็นภาษาอังกฤษ
- แก้ไขข้อมูลราคาประเมินใน `backend/api/api_with_real_model.py` ให้ใช้ key เป็นภาษาอังกฤษ
- แก้ไขฟังก์ชัน `generate_recommendations` ให้ตรวจสอบชื่อประเภทภาษาอังกฤษ
- อัพเดทฐานข้อมูลราคาใน `backend/services/valuation.py` ให้ใช้ชื่อหมวดหมู่ภาษาอังกฤษ
- อัพเดทข้อมูลร้านค้าและความเชี่ยวชาญใน `backend/services/recommend.py`
- อัพเดท class_mapping สำหรับการแปลง class_id เป็น class_name

### 3. การอัพเดท Frontend

- ปรับโครงสร้างไฟล์ใน frontend ให้มีการใช้งาน utils โดยถูกต้อง
- สร้างไฟล์ `frontend/utils.py` เพื่อความเข้ากันได้กับโค้ดเก่า

### 4. การอัพเดท Dataset Reorganization Tool

- ปรับปรุง `tools/reorganize_dataset.py` ให้รองรับหมวดหมู่ `wat_nong_e_duk_misc`

## สถานะการดำเนินการ

จากการตรวจสอบด้วยคำสั่ง `reorganize_dataset.py --dry-run` พบว่า:

- โฟลเดอร์ `dataset_organized` มีไฟล์ในโครงสร้างใหม่เรียบร้อยแล้ว (มีการ skip เนื่องจากไฟล์มีอยู่แล้ว)
- โฟลเดอร์ `dataset_split` มีทั้งโฟลเดอร์ชื่อภาษาไทยและภาษาอังกฤษคู่ขนานกัน โดยที่:
  - โฟลเดอร์ภาษาอังกฤษมีไฟล์ครบถ้วนแล้ว
  - โฟลเดอร์ภาษาไทยมีบางไฟล์ที่ยังคงอยู่ แต่ไม่มีการอ้างอิงในโค้ดแล้ว

## คำแนะนำเพิ่มเติม

1. **การจัดการโฟลเดอร์ภาษาไทย**: สามารถลบโฟลเดอร์ภาษาไทยใน `dataset_split` ได้เพื่อลดความสับสน เนื่องจากมีการใช้งานโฟลเดอร์ภาษาอังกฤษทั้งหมดแล้ว

2. **การทดสอบระบบ**: ควรทดสอบการทำงานของระบบหลังจากการอัพเดท โดยเฉพาะในส่วนของ:
   - การตรวจจับพระเครื่องจากรูปภาพ
   - การแสดงผลข้อมูลราคาประเมิน
   - การแนะนำตลาดซื้อขาย

3. **การทำความเข้าใจกับทีม**: ควรอธิบายการเปลี่ยนแปลงให้ทีมทราบ เพื่อให้ทุกคนเข้าใจระบบการตั้งชื่อใหม่ที่เป็นภาษาอังกฤษ
