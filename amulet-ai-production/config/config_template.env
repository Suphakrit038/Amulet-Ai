# üîß Amulet-AI Enhanced Configuration Template
# Copy this to .env and modify as needed for your environment

# ====================================
# üîê SECURITY SETTINGS (REQUIRED!)
# ====================================

# Secret key for security (CHANGE THIS IN PRODUCTION!)
AMULET_SECRET_KEY=your-super-secret-key-change-this-in-production

# Debug mode (set to false in production)
AMULET_DEBUG=true

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
AMULET_LOG_LEVEL=INFO

# ====================================
# üíæ MEMORY MANAGEMENT SETTINGS
# ====================================

# Memory warning threshold (0.0-1.0)
# System will log warnings when memory usage exceeds this
AMULET_MEMORY_WARNING_THRESHOLD=0.8

# Memory critical threshold (0.0-1.0)
# System will trigger aggressive cleanup when memory usage exceeds this
AMULET_MEMORY_CRITICAL_THRESHOLD=0.9

# Memory mapping threshold for large files (bytes)
# Files larger than this will use memory mapping instead of loading into RAM
AMULET_MMAP_THRESHOLD=52428800

# Large image threshold (bytes)
# Images larger than this will be processed with special handling
AMULET_LARGE_IMAGE_THRESHOLD=10485760

# Garbage collection frequency (seconds)
# How often to run automatic garbage collection
AMULET_GC_FREQUENCY=300

# Memory pressure check interval (seconds)
# How often to check memory pressure and trigger cleanup
AMULET_MEMORY_CHECK_INTERVAL=60

# ====================================
# ‚ö° PERFORMANCE SETTINGS
# ====================================

# Cache maximum size (bytes)
# Total size limit for all caches combined
AMULET_CACHE_MAX_SIZE=104857600

# Image cache size (number of images)
# Maximum number of images to keep in cache
AMULET_IMAGE_CACHE_SIZE=500

# Image cache TTL (seconds)
# How long to keep images in cache
AMULET_IMAGE_CACHE_TTL=1800

# Default cache TTL (seconds)
# Default time-to-live for cache entries
AMULET_CACHE_DEFAULT_TTL=900

# Connection pool size
# Maximum number of HTTP connections to maintain
AMULET_CONNECTION_POOL_SIZE=100

# Connection timeout (seconds)
# Timeout for HTTP connections
AMULET_CONNECTION_TIMEOUT=30

# Chunk size for streaming (bytes)
# Size of chunks when streaming large files
AMULET_CHUNK_SIZE=8192

# Performance monitoring window (seconds)
# Time window for calculating performance metrics
AMULET_PERFORMANCE_WINDOW=3600

# ====================================
# üîí THREAD SAFETY SETTINGS
# ====================================

# Thread pool size
# Number of worker threads for concurrent operations
AMULET_THREAD_POOL_SIZE=4

# Lock timeout (seconds)
# Maximum time to wait for acquiring locks
AMULET_LOCK_TIMEOUT=30

# Thread safety check interval (seconds)
# How often to check thread safety statistics
AMULET_THREAD_CHECK_INTERVAL=120

# Maximum concurrent operations
# Limit on concurrent operations to prevent resource exhaustion
AMULET_MAX_CONCURRENT_OPS=50

# ====================================
# üõ°Ô∏è ERROR HANDLING SETTINGS
# ====================================

# Retry maximum attempts
# Maximum number of retry attempts for failed operations
AMULET_RETRY_MAX_ATTEMPTS=3

# Retry delay (seconds)
# Initial delay between retry attempts
AMULET_RETRY_DELAY=1.0

# Retry backoff multiplier
# Multiplier for exponential backoff (delay *= multiplier each retry)
AMULET_RETRY_BACKOFF_MULTIPLIER=2.0

# Circuit breaker failure threshold
# Number of consecutive failures before opening circuit breaker
AMULET_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Circuit breaker recovery timeout (seconds)
# Time to wait before attempting to close circuit breaker
AMULET_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# Error context retention (seconds)
# How long to keep error context information
AMULET_ERROR_CONTEXT_RETENTION=3600

# ====================================
# üåê API SETTINGS
# ====================================

# API host
AMULET_API_HOST=localhost

# API port
AMULET_API_PORT=8000

# API workers (for production deployment)
AMULET_API_WORKERS=1

# Request timeout (seconds)
AMULET_REQUEST_TIMEOUT=60

# Maximum request size (bytes)
AMULET_MAX_REQUEST_SIZE=104857600

# Rate limiting (requests per minute)
AMULET_RATE_LIMIT=60

# ====================================
# üìä MONITORING SETTINGS
# ====================================

# Health check interval (seconds)
# How often to update health check information
AMULET_HEALTH_CHECK_INTERVAL=30

# Metrics retention period (seconds)
# How long to keep performance metrics
AMULET_METRICS_RETENTION=86400

# Statistics window (seconds)
# Time window for calculating rolling statistics
AMULET_STATS_WINDOW=300

# Alert thresholds
AMULET_ERROR_RATE_THRESHOLD=0.05
AMULET_RESPONSE_TIME_THRESHOLD=5.0

# ====================================
# üé® FRONTEND SETTINGS
# ====================================

# Streamlit host
AMULET_FRONTEND_HOST=localhost

# Streamlit port
AMULET_FRONTEND_PORT=8501

# Session timeout (seconds)
AMULET_SESSION_TIMEOUT=3600

# Maximum file upload size (bytes)
AMULET_MAX_UPLOAD_SIZE=52428800

# ====================================
# üìÅ FILE SYSTEM SETTINGS
# ====================================

# Temporary directory
AMULET_TEMP_DIR=./temp

# Log directory
AMULET_LOG_DIR=./logs

# Cache directory
AMULET_CACHE_DIR=./cache

# Upload directory
AMULET_UPLOAD_DIR=./uploads

# Model directory
AMULET_MODEL_DIR=./trained_model

# ====================================
# ü§ñ AI MODEL SETTINGS
# ====================================

# Model file paths (relative to AMULET_MODEL_DIR)
AMULET_CLASSIFIER_PATH=classifier.joblib
AMULET_SCALER_PATH=scaler.joblib
AMULET_PCA_PATH=pca.joblib
AMULET_LABEL_ENCODER_PATH=label_encoder.joblib
AMULET_OOD_DETECTOR_PATH=ood_detector.joblib

# Model cache settings
AMULET_MODEL_CACHE_ENABLED=true
AMULET_MODEL_PRELOAD=true

# Prediction confidence threshold
AMULET_CONFIDENCE_THRESHOLD=0.7

# Out-of-distribution detection threshold
AMULET_OOD_THRESHOLD=0.8

# ====================================
# üîÑ BACKUP & RECOVERY SETTINGS
# ====================================

# Backup interval (seconds)
AMULET_BACKUP_INTERVAL=3600

# Backup retention (days)
AMULET_BACKUP_RETENTION_DAYS=7

# Auto-recovery enabled
AMULET_AUTO_RECOVERY=true

# Recovery timeout (seconds)
AMULET_RECOVERY_TIMEOUT=300

# ====================================
# üß™ DEVELOPMENT SETTINGS
# ====================================

# Enable profiling
AMULET_PROFILING_ENABLED=false

# Profile output directory
AMULET_PROFILE_DIR=./profiles

# Test mode
AMULET_TEST_MODE=false

# Mock external services
AMULET_MOCK_SERVICES=false

# ====================================
# üìà ADVANCED SETTINGS
# ====================================

# Memory pool size (bytes)
# Pre-allocated memory pool for frequent allocations
AMULET_MEMORY_POOL_SIZE=67108864

# CPU affinity (comma-separated CPU IDs)
# Bind process to specific CPU cores (leave empty for auto)
AMULET_CPU_AFFINITY=

# I/O thread pool size
# Number of threads for I/O operations
AMULET_IO_THREAD_POOL_SIZE=2

# Async task queue size
# Maximum number of pending async tasks
AMULET_ASYNC_QUEUE_SIZE=1000

# Resource cleanup interval (seconds)
# How often to clean up unused resources
AMULET_CLEANUP_INTERVAL=1800

# ====================================
# üåç ENVIRONMENT-SPECIFIC OVERRIDES
# ====================================

# Uncomment and modify for production environment
# AMULET_DEBUG=false
# AMULET_LOG_LEVEL=WARNING
# AMULET_MEMORY_WARNING_THRESHOLD=0.85
# AMULET_CACHE_MAX_SIZE=209715200
# AMULET_CONNECTION_POOL_SIZE=200
# AMULET_THREAD_POOL_SIZE=8
# AMULET_API_WORKERS=4

# Uncomment and modify for development environment
# AMULET_DEBUG=true
# AMULET_LOG_LEVEL=DEBUG
# AMULET_PROFILING_ENABLED=true
# AMULET_TEST_MODE=true

# Uncomment and modify for testing environment
# AMULET_MOCK_SERVICES=true
# AMULET_CACHE_MAX_SIZE=10485760
# AMULET_CONNECTION_POOL_SIZE=10

# ====================================
# üí° CONFIGURATION NOTES
# ====================================

# Memory Settings:
# - Set thresholds based on available system RAM
# - Lower thresholds for memory-constrained environments
# - Higher cache sizes for better performance (if RAM allows)

# Performance Settings:
# - Increase connection pool size for high-load scenarios
# - Adjust cache TTL based on data update frequency
# - Monitor cache hit rates and adjust cache sizes accordingly

# Thread Safety:
# - Thread pool size should match CPU cores for CPU-bound tasks
# - Increase for I/O-bound tasks
# - Monitor thread statistics for optimal sizing

# Error Handling:
# - Adjust retry attempts based on service reliability
# - Circuit breaker thresholds should reflect acceptable failure rates
# - Monitor error patterns to tune settings

# Production Checklist:
# ‚úÖ Change AMULET_SECRET_KEY
# ‚úÖ Set AMULET_DEBUG=false
# ‚úÖ Configure appropriate log level
# ‚úÖ Set memory thresholds for your hardware
# ‚úÖ Configure monitoring and alerting
# ‚úÖ Set up log rotation
# ‚úÖ Configure backup settings
# ‚úÖ Test all settings in staging environment